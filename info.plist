<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>com.cookedwiki.base</string>
	<key>category</key>
	<string>Productivity</string>
	<key>connections</key>
	<dict>
		<key>660012B6-B741-419D-AECB-1DE38ABB3082</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>116832E8-E504-48DB-AE88-7B7289FEF7DA</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Dom Robson-Tull</string>
	<key>description</key>
	<string>Open up Recipes in an easy to read format with 'Cook'. To use this tool, either have the website with the recepie URL on in Chrome/Safari, then type 'cook' to automatically grab the url and generate the recipe. Or manually enter the url with 'cook &lt;url&gt;'.</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>CookedWiki</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>skipqueryencode</key>
				<false/>
				<key>skipvarencode</key>
				<true/>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string>{query}</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>116832E8-E504-48DB-AE88-7B7289FEF7DA</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<true/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>1</integer>
				<key>escaping</key>
				<integer>102</integer>
				<key>keyword</key>
				<string>cook</string>
				<key>queuedelaycustom</key>
				<integer>3</integer>
				<key>queuedelayimmediatelyinitially</key>
				<true/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string></string>
				<key>script</key>
				<string>#!/bin/bash

QUERY="{query}"

# Check if the user provided an argument (a URL)
if [ -n "$QUERY" ]; then
    URL="$QUERY"  # User-supplied URL
else
    # Get the current URL from the active browser
    URL=$(osascript -e '
    tell application "System Events"
        set frontApp to name of first application process whose frontmost is true
    end tell
    if frontApp is "Safari" then
        tell application "Safari" to return URL of front document
    else if frontApp is "Google Chrome" then
        tell application "Google Chrome" to return URL of active tab of front window
    else
        return "Browser not supported"
    end if
    ')
fi

# Clean up the URL by removing any trailing newlines or spaces
URL=$(echo "$URL" | sed 's/[[:space:]]*$//')

    MODIFIED_URL="https://cooked.wiki/${URL}"  # Prepend if not a full URL

# Output in Alfred-friendly JSON format
cat &lt;&lt; EOB
{
    "items": [
        {
            "title": "Open Recipe for $URL",
            "subtitle": "$MODIFIED_URL",
            "arg": "$MODIFIED_URL"
        }
    ]
}
EOB
</string>
				<key>scriptargtype</key>
				<integer>0</integer>
				<key>scriptfile</key>
				<string></string>
				<key>subtext</key>
				<string></string>
				<key>title</key>
				<string>CookingWiki</string>
				<key>type</key>
				<integer>0</integer>
				<key>withspace</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>660012B6-B741-419D-AECB-1DE38ABB3082</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
	</array>
	<key>readme</key>
	<string></string>
	<key>uidata</key>
	<dict>
		<key>116832E8-E504-48DB-AE88-7B7289FEF7DA</key>
		<dict>
			<key>xpos</key>
			<real>235</real>
			<key>ypos</key>
			<real>185</real>
		</dict>
		<key>660012B6-B741-419D-AECB-1DE38ABB3082</key>
		<dict>
			<key>xpos</key>
			<real>65</real>
			<key>ypos</key>
			<real>185</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array/>
	<key>variablesdontexport</key>
	<array/>
	<key>version</key>
	<string>1.0.0</string>
	<key>webaddress</key>
	<string>https://cooked.wiki/</string>
</dict>
</plist>
